<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>
        Nefelibata
    </title>
    
<link rel="stylesheet" href="/blog/css/style.css">

    <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.png" />
    <link rel="stylesheet" href="../css/style/github.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <script src="../js/jquery.min.js"></script>
    <script src="../js/highlight.min.js"></script>
    <!-- Include jQuery -->
    <!-- <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script> -->
    <!-- Include ClipboardJS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/blog/atom.xml" title="Nefelibata" type="application/atom+xml">

<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>

<body>
    <div class="container">
        <div class="header">
    <!-- <div class="logo">
        <a href="/blog/">Nefelibata</a>
    </div> -->
    <!-- <div class="logo">
        <img src="/images/lkp.png" alt="Logo">
    </div> -->
    <div class="nav">
        <ul class="menu">
            
                <li class="menu-item">
                    <a href="/blog/../" class="menu-item-link">
                        Nefelibata
                    </a>
                </li>
            
                <li class="menu-item">
                    <a href="/blog/" class="menu-item-link">
                        Blog
                    </a>
                </li>
            
                <li class="menu-item">
                    <a href="/blog/../gallery" class="menu-item-link">
                        Gallery
                    </a>
                </li>
            
                <li class="menu-item">
                    <a target="_blank" rel="noopener" href="https://github.com/kpl0111" class="menu-item-link">
                        Github
                    </a>
                </li>
            
                <li class="menu-item">
                    <a href="/blog/../about" class="menu-item-link">
                        About
                    </a>
                </li>
                
        </ul>
    </div>
</div>
        <div class="article">
    <!-- <div class="article-title">
        <h2>
            原码、反码、补码、移码、浮点数
        </h2>
    </div> -->
    
        
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2.7.8/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    
    <div class="article-meta">
        <div class="article-date">
            <i class="fas fa-edit"></i>
            2023/09/14 周四 13:02&nbsp;&nbsp;&nbsp;
            <span class="just-a-temp"><span>
            <i class="fas fa-redo"></i>
            2023/11/03 周五 21:24
        </div>
    </div>
    <div class="article-content">
        <h2 id="基本概念及表示范围"><a href="#基本概念及表示范围" class="headerlink" title="基本概念及表示范围"></a>基本概念及表示范围</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><ol>
<li>真值：对于无符号数，真值即对应其十进制数值，对于有符号数，首位为符号位首位为1表示负，首位为0表示正，剩余位为对应十进制绝对值</li>
<li>原码：符号位加上真值的绝对值。即用第一位表示符号 其余位表示值。比如如果是8位二进制: +1 = 1000_0001</li>
<li>反码：正数的反码是其本身，负数的反码是在其原码的基础上符号位不变，其余各个位取反。</li>
<li>补码：正数的补码就是其本身，负数的补码是在其反码的基础上+1</li>
<li>移码：真值+偏置值，n位二进制数偏置值为$2^n - 1$,其简单计算方法为补码符号位取反，数值位不变</li>
</ol>
<h3 id="浮点数"><a href="#浮点数" class="headerlink" title="浮点数"></a>浮点数</h3><p>$V = (-1)^S * M * R^E$,如8.345 * 10^0：</p>
<ul>
<li>S：符号位，取值 0 或 1，决定一个数字的符号，0 表示正，1 表示负</li>
<li>M：尾数，用小数表示，例如前面所看到的 8.345 * 10^0，8.345 就是尾数</li>
<li>R：基数，表示十进制数 R 就是 10，表示二进制数 R 就是 2</li>
<li>E：指数，用整数表示，例如前面看到的 10^-1，-1 即是指数</li>
</ul>
<p>例如32位二进制浮点数及可表示为下列格式：<br><img src="https://picture-0111.oss-cn-beijing.aliyuncs.com/img/20230914131854.png" alt="20230914131854"></p>
<h4 id="IEEE754标准"><a href="#IEEE754标准" class="headerlink" title="IEEE754标准"></a>IEEE754标准</h4><ul>
<li>单精度浮点数 float：32 位，符号位 S 占 1 bit，指数 E 占 8 bit，尾数 M 占 23 bit</li>
<li>双精度浮点数 float：64 位，符号位 S 占 1 bit，指数 E 占 11 bit，尾数 M 占 52 bit</li>
</ul>
<p>为了使其表示的数字范围、精度最大化，浮点数标准还对指数和尾数进行了规定：</p>
<ol>
<li>尾数 M 的第一位总是 1（因为 1 &lt;= M &lt; 2），因此这个 1 可以省略不写，它是个隐藏位，这样单精度 23 位尾数可以表示了 24 位有效数字，双精度 52 位尾数可以表示 53 位有效数字</li>
<li>指数 E 是个无符号整数，表示 float 时，一共占 8 bit，所以它的取值范围为 0 ~ 255。但因为指数可以是负的，所以规定在存入 E 时在它原本的值加上一个中间数 127，这样 E 的取值范围为 -127 ~ 128。表示 double 时，一共占 11 bit，存入 E 时加上中间数 1023，这样取值范围为 -1023 ~ 1024。</li>
</ol>
<p>除了规定尾数和指数位，还做了以下规定：</p>
<ul>
<li>指数 E 非全 0 且非全 1：规格化数字，按上面的规则正常计算</li>
<li>指数 E 全 0，尾数非 0：非规格化数，尾数隐藏位不再是 1，而是 0(M = 0.xxxxx)，这样可以表示 0 和很小的数</li>
<li>指数 E 全 1，尾数全 0：正无穷大/负无穷大（正负取决于 S 符号位）</li>
<li>指数 E 全 1，尾数非 0：NaN(Not a Number)</li>
</ul>
<p><img src="https://picture-0111.oss-cn-beijing.aliyuncs.com/img/20230914132505.png" alt="20230914132505"></p>
<p>有了这个统一的浮点数标准，我们再把 25.125 转换为标准的 float 浮点数：</p>
<ol>
<li>整数部分：25(D) = 11001(B)</li>
<li>小数部分：0.125(D) = 0.001(B)</li>
<li>用二进制科学计数法表示：25.125(D) = 11001.001(B) = 1.1001001 * 2^4(B)</li>
</ol>
<p>所以 S = 0，尾数 M = 1.001001 = 001001(去掉1，隐藏位)，指数 E = 4 + 127(中间数) = 135(D) = 10000111(B)。填充到 32 bit 中，如下：</p>
<p><img src="https://picture-0111.oss-cn-beijing.aliyuncs.com/img/20230914132537.png" alt="20230914132537"></p>
<h2 id="相互转换以及运算"><a href="#相互转换以及运算" class="headerlink" title="相互转换以及运算"></a>相互转换以及运算</h2><h3 id="二进制十进制转换"><a href="#二进制十进制转换" class="headerlink" title="二进制十进制转换"></a>二进制十进制转换</h3><ol>
<li><p>整数转二进制<br> 采用”除2取余，逆序排列”法：</p>
<ol>
<li>首先用2整除一个十进制整数，得到一个商和余数</li>
<li>然后再用2去除得到的商，又会得到一个商和余数</li>
<li>重复操作，一直到商为小于1时为止</li>
<li>然后将得到的所有余数全部排列起来，再将它反过来（逆序排列），切记一定要反过来！<br> 假设我们现在需要将42转为二进制，那我们怎么做呢，如下图所示：<br> <img src="https://picture-0111.oss-cn-beijing.aliyuncs.com/img/20230914132843.png" alt="20230914132843"></li>
</ol>
</li>
<li><p>小数转二进制<br> 采用”乘2取整，顺序排列”法：</p>
<ol>
<li>用2乘十进制小数，可以得到积，将积的整数部分取出</li>
<li>再用2乘余下的小数部分，又得到一个积，再将积的整数部分取出</li>
<li>重复操作，直到积中的小数部分为零，此时0或1为二进制的最后一位，或者达到所要求的精度为止</li>
</ol>
<p> 例如将0.125转换为二进制：</p>
<ol>
<li>0.125  *  2  =  0.25 ——0</li>
<li>0.25   *  2  =  0.5   ——0</li>
<li>0.5  *  2  =  1.0     ——1<br> 当小数部分为0就可以停止乘2了，然后正序排序就构成了二进制的小数部分：0.001</li>
</ol>
<p> 如果小数的整数部分有大于0的整数时，将整数部分和小数部分先单独转为二进制，再合在一起就可以了，</p>
<p> 例如：假设要将8.125 转换为二进制</p>
<ol>
<li>现将8转为二进制：得到1000</li>
<li>再将0.125转为二进制：得到0.001</li>
<li>合并后为1000.001</li>
</ol>
</li>
<li><p>二进制转十进制<br> 以小数点左边一位为0，往左位阶依次是$2^1,2^2…$，往右是$2^{-1}, 2^{-2}…$,依次相乘并加和即可</p>
</li>
</ol>
<h3 id="原码、反码、补码、移码相互转换"><a href="#原码、反码、补码、移码相互转换" class="headerlink" title="原码、反码、补码、移码相互转换"></a>原码、反码、补码、移码相互转换</h3><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">原码</th>
<th align="center">反码</th>
<th align="center">补码</th>
<th align="center">移码</th>
</tr>
</thead>
<tbody><tr>
<td align="center">正整数</td>
<td align="center">本身，符号位为0</td>
<td align="center">与原码相同</td>
<td align="center">与原码相同</td>
<td align="center">符号位取反</td>
</tr>
<tr>
<td align="center">负整数</td>
<td align="center">本身，符号位为1</td>
<td align="center">符号位不变，数值位按位取反</td>
<td align="center">反码末位加1</td>
<td align="center">符号位取反</td>
</tr>
<tr>
<td align="center">正小数</td>
<td align="center">本身，符号位为0</td>
<td align="center">与原码相同</td>
<td align="center">与原码相同</td>
<td align="center">小数无移码</td>
</tr>
<tr>
<td align="center">负小数</td>
<td align="center">本身，符号位为1</td>
<td align="center">符号位不变，数值位按位取反</td>
<td align="center">反码末位加1</td>
<td align="center">小数无移码</td>
</tr>
</tbody></table>
<h3 id="表示范围"><a href="#表示范围" class="headerlink" title="表示范围"></a>表示范围</h3><p>设有一个n位二进制数</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">表示范围（机器字长为n + 1）</th>
<th align="center">特征</th>
</tr>
</thead>
<tbody><tr>
<td align="center">整数原码</td>
<td align="center">$-（2^n -1）\le x \le 2^n - 1$</td>
<td align="center">0的表示方法有两种,原点对称</td>
</tr>
<tr>
<td align="center">小数原码</td>
<td align="center">$-(1 - 2^{-n}) \le x \le 1 - 2^{-n}$</td>
<td align="center">0的表示方法有两种,原点对称</td>
</tr>
<tr>
<td align="center">整数反码</td>
<td align="center">$-（2^n -1）\le x \le 2^n - 1$</td>
<td align="center">0的表示方法有两种,原点对称</td>
</tr>
<tr>
<td align="center">小数反码</td>
<td align="center">$-(1 - 2^{-n}) \le x \le 1 - 2^{-n}$</td>
<td align="center">0的表示方法有两种,原点对称</td>
</tr>
<tr>
<td align="center">整数补码</td>
<td align="center">$- 2^n \le x \le 2^n - 1$</td>
<td align="center">真值0只有一种形式，并规定1000，0000表示$x = -2^7$</td>
</tr>
<tr>
<td align="center">小数补码</td>
<td align="center">$-1 \le x \le 1 - 2^{-n}$</td>
<td align="center">真值0只有一种格式，规定1.000，0000表示x = -1</td>
</tr>
<tr>
<td align="center">整数移码</td>
<td align="center">$- 2^n \le x \le 2^n - 1$</td>
<td align="center">移码只能用于表示整数，0同样只有一种表示形式，很容易对比大小，移码表示数依次真值递增</td>
</tr>
</tbody></table>
<p>在现代计算机中，通常用<strong>定点补码表示整数</strong> ，用<strong>定点原码表示小数</strong> ，用<strong>移码表示浮点数的阶码</strong></p>
<h3 id="加减运算"><a href="#加减运算" class="headerlink" title="加减运算"></a>加减运算</h3><p>原码加减：</p>
<ul>
<li>原码加减比较麻烦，一般采用补码进行运算</li>
</ul>
<p>补码加减：</p>
<ul>
<li>直接相加并进位</li>
<li>减法等同于加上负数，</li>
<li>由$[x]<em>{补}$ 求$[-x]</em>{补}$，将所有位取反，末尾加一</li>
</ul>
<h3 id="乘法运算"><a href="#乘法运算" class="headerlink" title="乘法运算"></a>乘法运算</h3><ol>
<li>原码：符号位和数值位单独运算</li>
<li>补码：待补充</li>
</ol>
<h3 id="除法运算"><a href="#除法运算" class="headerlink" title="除法运算"></a>除法运算</h3><p>待补充</p>
<h3 id="符号扩展"><a href="#符号扩展" class="headerlink" title="符号扩展"></a>符号扩展</h3><ol>
<li>正数（原、反、补码都一样）最高位进行扩展</li>
<li>负数<ol>
<li>原码：在符号位和数值位之间补0</li>
<li>反码：在符号位和数值位之间补1</li>
<li>补码：在符号位和数值位之间补1</li>
</ol>
</li>
<li>正小数（原、反、补码都一样）末尾进行0扩展</li>
<li>负小数<ol>
<li>原码：末尾补0</li>
<li>反码：末位补1</li>
<li>补码：末位补0</li>
</ol>
</li>
</ol>
<h3 id="定点数移位运算"><a href="#定点数移位运算" class="headerlink" title="定点数移位运算"></a>定点数移位运算</h3><h4 id="算术移位"><a href="#算术移位" class="headerlink" title="算术移位"></a>算术移位</h4><ol>
<li>原码：符号位不参与移位，左移右移都补0</li>
<li>反码：符号位不参与移位，左移右移都补1</li>
<li>补码：符号位不参与移位，左移补0，右移补1</li>
</ol>
<h4 id="逻辑移位"><a href="#逻辑移位" class="headerlink" title="逻辑移位"></a>逻辑移位</h4><p>可看作对无符号数的移位</p>
<h4 id="循环移位"><a href="#循环移位" class="headerlink" title="循环移位"></a>循环移位</h4><p>循环补位，注意进位位</p>

    </div>

    <div class="totop">ToTop</div>
    <script type="text/javascript" src="../libs/codeBlock/codeBlockFuction.js"></script>
    <!-- 代码语言 -->
    <script type="text/javascript" src="../libs/codeBlock/codeLang.js"></script>
    <!-- 代码块复制 -->
    <script type="text/javascript" src="../libs/codeBlock/codeCopy.js"></script>
    <script type="text/javascript" src="../libs/codeBlock/clipboard.min.js"></script>
    <!-- 代码块收缩 -->
    <script type="text/javascript" src="../libs/codeBlock/codeShrink.js"></script> 
    <!-- 代码块折行 -->
    <style type="text/css">code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }</style>
</div>
        <div class="footer">
    <a href="#">
        2020 <i class="fab fa-studiovinari"></i> Nefelibata <i class="fas fa-angle-double-up"></i>
    </a>
</div>


<script src="/blog/js/totop.js"></script>


<script src="/blog/js/search.js"></script>

    </div>
</body>

</html>